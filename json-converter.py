import json
import csv

# Datos JSON
data = {"jsonrpc":"2.0","result":[{"hostid":"11141","name":"ROMSW222","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"11158","name":"MADAC01","groups":[{"name":"Networking"},{"name":"Madrid"}]},{"hostid":"11139","name":"ROMFWPA051","groups":[{"name":"Networking"},{"name":"Firewall"},{"name":"Rome"}]},{"hostid":"11457","name":"rommon01","groups":[{"name":"Virtual machines"}]},{"hostid":"11456","name":"romxsreng01","groups":[{"name":"Virtual machines"}]},{"hostid":"11166","name":"romsrv01-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11142","name":"ROMFWASA051","groups":[{"name":"Networking"},{"name":"Firewall"},{"name":"Rome"}]},{"hostid":"11159","name":"MADFW01","groups":[{"name":"Networking"},{"name":"Firewall"},{"name":"Madrid"}]},{"hostid":"11160","name":"MADSWACC01","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"11143","name":"ROMFWASA052","groups":[{"name":"Networking"},{"name":"Firewall"},{"name":"Rome"}]},{"hostid":"11458","name":"rommon02","groups":[{"name":"Virtual machines"}]},{"hostid":"11169","name":"romsrv04-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11161","name":"MADSWACC02","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"11144","name":"ROMFWPA052","groups":[{"name":"Networking"},{"name":"Firewall"},{"name":"Rome"}]},{"hostid":"11162","name":"MADSWPOE01","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"11145","name":"ROMLBF5051","groups":[{"name":"Networking"},{"name":"Rome"}]},{"hostid":"11163","name":"MADSWPOE02","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"11146","name":"ROMLBF5052","groups":[{"name":"Networking"},{"name":"Rome"}]},{"hostid":"10574","name":"romhuastg03","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11171","name":"romsrv06-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11147","name":"ROMSW213","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"11164","name":"MADSWSTO01","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"11357","name":"test_auto_vm","groups":[{"name":"Virtual machines"}]},{"hostid":"11190","name":"AdversaryEmulation - CentOS","groups":[{"name":"Virtual machines"}]},{"hostid":"11149","name":"ROMSWCOB021","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Core Cooper"},{"name":"Rome Office"}]},{"hostid":"11186","name":"AdversaryEmulation - Windows Server","groups":[{"name":"Virtual machines"}]},{"hostid":"11193","name":"romad02","groups":[{"name":"Virtual machines"}]},{"hostid":"11148","name":"ROMSWCOB022","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Core Cooper"},{"name":"Rome Office"}]},{"hostid":"11165","name":"MADSWSTO02","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Madrid"}]},{"hostid":"10576","name":"romhuastg04","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11168","name":"romsrv03-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11173","name":"romsrv07-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11150","name":"ROMSWCOR031","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Core Fiber"},{"name":"Rome Office"}]},{"hostid":"11211","name":"Cisco_FMC","groups":[{"name":"Virtual machines"}]},{"hostid":"11151","name":"ROMSWCOR032","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Core Fiber"},{"name":"Rome Office"}]},{"hostid":"11234","name":"romad01","groups":[{"name":"Virtual machines"}]},{"hostid":"11152","name":"ROMSWPOE221","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"10588","name":"romhuastg02","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11167","name":"romsrv02-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11170","name":"romsrv05-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11153","name":"ROMSWPOE311","groups":[{"name":"Networking"},{"name":"Switchs"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"11155","name":"ROMVPNPSA052","groups":[{"name":"Networking"},{"name":"Rome"},{"name":"VPNPS"}]},{"hostid":"11154","name":"ROMVPNPSA051","groups":[{"name":"Networking"},{"name":"Rome"},{"name":"VPNPS"}]},{"hostid":"11156","name":"ROMWIFI051","groups":[{"name":"Networking"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"11157","name":"ROMWIFI052","groups":[{"name":"Networking"},{"name":"Rome"},{"name":"Rome Office"}]},{"hostid":"11229","name":"Adversary Emulation - Windows 10","groups":[{"name":"Virtual machines"}]},{"hostid":"10568","name":"VMware vSphere","groups":[{"name":"VMware"},{"name":"Rome"}]},{"hostid":"11360","name":"Clon_AdEmu Win Server 20230731","groups":[{"name":"Virtual machines"}]},{"hostid":"11373","name":"romxsrnfs01","groups":[{"name":"Virtual machines"}]},{"hostid":"11383","name":"romxsrnfs02","groups":[{"name":"Virtual machines"}]},{"hostid":"11384","name":"romxsropsda","groups":[{"name":"Virtual machines"}]},{"hostid":"11389","name":"romxsrtim","groups":[{"name":"Virtual machines"}]},{"hostid":"11385","name":"romxsrops02","groups":[{"name":"Virtual machines"}]},{"hostid":"11381","name":"romxsrops03","groups":[{"name":"Virtual machines"}]},{"hostid":"11390","name":"rommon03","groups":[{"name":"Virtual machines"}]},{"hostid":"11391","name":"romEDM01","groups":[{"name":"Virtual machines"}]},{"hostid":"11392","name":"romgit01","groups":[{"name":"Virtual machines"}]},{"hostid":"11394","name":"romjscon01","groups":[{"name":"Virtual machines"}]},{"hostid":"11395","name":"romjsit02","groups":[{"name":"Virtual machines"}]},{"hostid":"11397","name":"romtenable01","groups":[{"name":"Virtual machines"}]},{"hostid":"11407","name":"romdns01","groups":[{"name":"Virtual machines"}]},{"hostid":"11412","name":"romlitmgm","groups":[{"name":"Virtual machines"}]},{"hostid":"11413","name":"romjsit01","groups":[{"name":"Virtual machines"}]},{"hostid":"11414","name":"romlic01","groups":[{"name":"Virtual machines"}]},{"hostid":"11415","name":"romjsnet01","groups":[{"name":"Virtual machines"}]},{"hostid":"11416","name":"romjsit03","groups":[{"name":"Virtual machines"}]},{"hostid":"11410","name":"romwoccon01","groups":[{"name":"Virtual machines"}]},{"hostid":"11411","name":"romwocsat01","groups":[{"name":"Virtual machines"}]},{"hostid":"11417","name":"romjssoc01","groups":[{"name":"Virtual machines"}]},{"hostid":"11273","name":"CPE03_TIM","groups":[{"name":"Networking"}]},{"hostid":"11422","name":"rompanapp01","groups":[{"name":"Virtual machines"}]},{"hostid":"11433","name":"romEDM02","groups":[{"name":"Virtual machines"}]},{"hostid":"11435","name":"romfmgapp01","groups":[{"name":"Virtual machines"}]},{"hostid":"11436","name":"romitcr01","groups":[{"name":"Virtual machines"}]},{"hostid":"11437","name":"romjsdev01","groups":[{"name":"Virtual machines"}]},{"hostid":"11438","name":"romerp01","groups":[{"name":"Virtual machines"}]},{"hostid":"11439","name":"romEDM03","groups":[{"name":"Virtual machines"}]},{"hostid":"11440","name":"romvcsa01","groups":[{"name":"Virtual machines"}]},{"hostid":"11386","name":"romxsrops01","groups":[{"name":"Virtual machines"}]},{"hostid":"11359","name":"ROM-FM800-1","groups":[{"name":"Networking"},{"name":"Rome"}]},{"hostid":"11459","name":"ROM-FM800-2","groups":[{"name":"Networking"},{"name":"Rome"}]},{"hostid":"11442","name":"RomBKSrv","groups":[{"name":"Virtual machines"}]},{"hostid":"10578","name":"romsrv11.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Datacenter"},{"name":"Rome_Cluster_DEV"}]},{"hostid":"10579","name":"romsrv02.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10584","name":"romsrv01.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10585","name":"romsrv03.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10587","name":"romsrv08.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10580","name":"romsrv09.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10581","name":"romsrv04.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10583","name":"romsrv10.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Datacenter"},{"name":"Rome_Cluster_DEV"}]},{"hostid":"10582","name":"romsrv05.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10586","name":"romsrv06.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"10577","name":"romsrv07.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Rome_Cluster_PRO"},{"name":"Rome_Datacenter"}]},{"hostid":"11374","name":"romxsrmo01","groups":[{"name":"Virtual machines"}]},{"hostid":"11375","name":"romxsrapp01","groups":[{"name":"Virtual machines"}]},{"hostid":"11378","name":"romxsrapp02","groups":[{"name":"Virtual machines"}]},{"hostid":"11379","name":"romxsrmo02","groups":[{"name":"Virtual machines"}]},{"hostid":"11380","name":"romxsrmo03","groups":[{"name":"Virtual machines"}]},{"hostid":"11387","name":"romxsrmo04","groups":[{"name":"Virtual machines"}]},{"hostid":"11388","name":"romxsrapp03","groups":[{"name":"Virtual machines"}]},{"hostid":"11490","name":"Clon_AdEmu Win Server 20230901","groups":[{"name":"Virtual machines"}]},{"hostid":"11491","name":"AdversaryEmulation - Windows Server 2022","groups":[{"name":"Virtual machines"}]},{"hostid":"11483","name":"UCCX-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11473","name":"ESXi-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11482","name":"CCM2-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11481","name":"CCM1-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11487","name":"CUBE-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11488","name":"CIMC-IT","groups":[{"name":"Networking"},{"name":"Rome_VoIP"}]},{"hostid":"11497","name":"Web Detector","groups":[{"name":"Applications"},{"name":"Production"}]},{"hostid":"11492","name":"CCM1-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11489","name":"CIMC-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11495","name":"UCCX-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11493","name":"CCM2-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11496","name":"CUBE-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11376","name":"dromxsr01","groups":[{"name":"Virtual machines"}]},{"hostid":"11377","name":"dromxsr02","groups":[{"name":"Virtual machines"}]},{"hostid":"11401","name":"dromwoccon01","groups":[{"name":"Virtual machines"}]},{"hostid":"11398","name":"dromteniot","groups":[{"name":"Virtual machines"}]},{"hostid":"11399","name":"dromspldcn01","groups":[{"name":"Virtual machines"}]},{"hostid":"11400","name":"dromsplidx01","groups":[{"name":"Virtual machines"}]},{"hostid":"11402","name":"dromsplcm","groups":[{"name":"Virtual machines"}]},{"hostid":"11403","name":"dromdevpor","groups":[{"name":"Virtual machines"}]},{"hostid":"11404","name":"dromzabbix","groups":[{"name":"Virtual machines"}]},{"hostid":"11426","name":"dromsplite01","groups":[{"name":"Virtual machines"}]},{"hostid":"11427","name":"dromsplidx02","groups":[{"name":"Virtual machines"}]},{"hostid":"11428","name":"dromgit01","groups":[{"name":"Virtual machines"}]},{"hostid":"11430","name":"dromsplsh","groups":[{"name":"Virtual machines"}]},{"hostid":"11431","name":"dromsplhf","groups":[{"name":"Virtual machines"}]},{"hostid":"11432","name":"dromlitmgm","groups":[{"name":"Virtual machines"}]},{"hostid":"11429","name":"dromlucia","groups":[{"name":"Virtual machines"}]},{"hostid":"11463","name":"drommist","groups":[{"name":"Virtual machines"}]},{"hostid":"11498","name":"dromnetbox","groups":[{"name":"Virtual machines"}]},{"hostid":"11499","name":"dromradius","groups":[{"name":"Virtual machines"}]},{"hostid":"11500","name":"BeDisruptive.com - Cloudflare","groups":[{"name":"Production"}]},{"hostid":"11494","name":"ESXi-ES","groups":[{"name":"Networking"},{"name":"Madrid_VoIP"}]},{"hostid":"11506","name":"3a36ed0e102c4835958b319a7aa061de-dbserver - MySQL","groups":[{"name":"Databases"},{"name":"Azure"}]},{"hostid":"11507","name":"MISP-VM","groups":[{"name":"Virtual machines"},{"name":"Azure"}]},{"hostid":"11508","name":"XSOARTIMVM","groups":[{"name":"Virtual machines"},{"name":"Azure"}]},{"hostid":"10573","name":"romhuastg01","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11367","name":"romnimble01","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"10572","name":"romhuastg05","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11510","name":"madstgone01-ILO.bedisruptive.com","groups":[{"name":"Madrid"},{"name":"iLO Servers"}]},{"hostid":"11172","name":"romsrv08-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11174","name":"romsrv10-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11175","name":"romsrv09-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11176","name":"romsrv11-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11511","name":"madsrv01-ILO.bedisruptive.com","groups":[{"name":"Madrid"},{"name":"iLO Servers"}]},{"hostid":"11512","name":"madsrv02-ILO.bedisruptive.com","groups":[{"name":"Madrid"},{"name":"iLO Servers"}]},{"hostid":"11513","name":"madsrv03-ILO.bedisruptive.com","groups":[{"name":"Madrid"},{"name":"iLO Servers"}]},{"hostid":"11514","name":"madnimble01","groups":[{"name":"Storage"},{"name":"Madrid"}]},{"hostid":"11517","name":"madsrv03.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Madrid_Datacenter"}]},{"hostid":"11509","name":"madstgone01","groups":[{"name":"Storage"},{"name":"Madrid"}]},{"hostid":"11372","name":"romstgone01-ILO.bedisruptive.com","groups":[{"name":"Rome"},{"name":"iLO Servers"}]},{"hostid":"11368","name":"romstgone01","groups":[{"name":"Storage"},{"name":"Rome"}]},{"hostid":"11515","name":"madsrv01.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Madrid_Datacenter"}]},{"hostid":"11518","name":"dmadxsrapp01","groups":[{"name":"Virtual machines"}]},{"hostid":"11516","name":"madsrv02.bedisruptive.com","groups":[{"name":"Applications"},{"name":"Madrid_Datacenter"}]},{"hostid":"11418","name":"romsplcl01hf","groups":[{"name":"Virtual machines"}]},{"hostid":"11501","name":"Azure AKS","groups":[{"name":"Azure"}]},{"hostid":"11519","name":"dmadbkproxy","groups":[{"name":"Virtual machines"}]},{"hostid":"11520","name":"dmadxsrops02","groups":[{"name":"Virtual machines"}]},{"hostid":"11521","name":"dmadxsrops01","groups":[{"name":"Virtual machines"}]},{"hostid":"11522","name":"dmadxsreng01","groups":[{"name":"Virtual machines"}]},{"hostid":"11523","name":"dmadxsrops03","groups":[{"name":"Virtual machines"}]},{"hostid":"11524","name":"dmadxsrmo02","groups":[{"name":"Virtual machines"}]},{"hostid":"11525","name":"dmadxsrfiles01","groups":[{"name":"Virtual machines"}]},{"hostid":"11526","name":"dmadxsrfiles03","groups":[{"name":"Virtual machines"}]},{"hostid":"11527","name":"dmadxsrfiles02","groups":[{"name":"Virtual machines"}]},{"hostid":"11528","name":"dmadxsrapp02","groups":[{"name":"Virtual machines"}]},{"hostid":"11529","name":"dmadxsrmo01","groups":[{"name":"Virtual machines"}]},{"hostid":"11405","name":"romspldcn01","groups":[{"name":"Virtual machines"}]},{"hostid":"11419","name":"romsplcl01sh","groups":[{"name":"Virtual machines"}]},{"hostid":"11420","name":"romsplcl01mc","groups":[{"name":"Virtual machines"}]},{"hostid":"11421","name":"romsplcl01idx01","groups":[{"name":"Virtual machines"}]},{"hostid":"11423","name":"romsplcl01po","groups":[{"name":"Virtual machines"}]},{"hostid":"11424","name":"romsplcl01itsi","groups":[{"name":"Virtual machines"}]},{"hostid":"11443","name":"romsplcl01idx02","groups":[{"name":"Virtual machines"}]},{"hostid":"11393","name":"romsplcl02idx02","groups":[{"name":"Virtual machines"}]},{"hostid":"11447","name":"romsplcl02sh","groups":[{"name":"Virtual machines"}]},{"hostid":"11448","name":"romsplcl02mc","groups":[{"name":"Virtual machines"}]},{"hostid":"11449","name":"romsplcl02idx01","groups":[{"name":"Virtual machines"}]},{"hostid":"11409","name":"romsplcl03idx02","groups":[{"name":"Virtual machines"}]},{"hostid":"11434","name":"romsplcl03sh","groups":[{"name":"Virtual machines"}]},{"hostid":"11444","name":"romsplcl03mc","groups":[{"name":"Virtual machines"}]},{"hostid":"11446","name":"romsplcl03hf","groups":[{"name":"Virtual machines"}]},{"hostid":"11396","name":"romsplcl04idx02","groups":[{"name":"Virtual machines"}]},{"hostid":"11406","name":"romsplcl04idx01","groups":[{"name":"Virtual machines"}]},{"hostid":"11450","name":"romsplcl04sh","groups":[{"name":"Virtual machines"}]},{"hostid":"11451","name":"romsplcl04hf","groups":[{"name":"Virtual machines"}]},{"hostid":"11408","name":"romsplcomlic","groups":[{"name":"Virtual machines"}]},{"hostid":"11441","name":"romsplcomds","groups":[{"name":"Virtual machines"}]},{"hostid":"11445","name":"romsplcomdmc","groups":[{"name":"Virtual machines"}]},{"hostid":"11454","name":"romsplcl02hf","groups":[{"name":"Virtual machines"}]},{"hostid":"11452","name":"romsplcl03idx01","groups":[{"name":"Virtual machines"}]},{"hostid":"11453","name":"romsplcl04mc","groups":[{"name":"Virtual machines"}]}],"id":1}

# Nombre del archivo CSV de salida
csv_filename = "hosts.csv"

# Abrir el archivo CSV en modo escritura
with open(csv_filename, mode="w", newline="") as csv_file:
    writer = csv.writer(csv_file)
    
    # Escribir el encabezado
    writer.writerow(["hostid", "name", "groups"])
    
    # Iterar a trav√©s de los hosts y escribir cada fila en el CSV
    for host_info in data["result"]:
        hostid = host_info["hostid"]
        host = host_info["name"]
        groups = ", ".join(group["name"] for group in host_info["groups"])
        
        # Escribir la fila en el CSV
        writer.writerow([hostid, host, groups])

print(f"Los datos se han exportado a {csv_filename}.")
